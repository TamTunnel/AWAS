{
  "$schema": "https://awas.dev/schema/v1.1/manifest.json",
  "specVersion": "1.1",
  "version": "1.0",
  "lastUpdated": "2025-12-01T14:00:00Z",
  "name": "E-Commerce Example Store",
  "description": "AI-readable actions for product browsing and shopping",
  "conformanceLevel": "L2",
  "actions": [
    {
      "id": "search_products",
      "type": "search",
      "intent": "read",
      "sideEffect": "safe",
      "name": "Search Products",
      "description": "Search for products by keyword, category, or filters",
      "method": "GET",
      "endpoint": "/api/search",
      "selector": "form[role='search']",
      "authentication_required": false,
      "conformanceLevel": "L1",
      "rateLimitHint": {
        "requests": 100,
        "window": "1m"
      },
      "inputs": [
        {
          "name": "q",
          "type": "string",
          "required": true,
          "description": "Search query",
          "selector": "input[name='q']",
          "examples": ["laptop", "wireless headphones"]
        },
        {
          "name": "category",
          "type": "string",
          "required": false,
          "description": "Filter by category",
          "selector": "select[name='category']",
          "validation": {
            "enum": ["electronics", "clothing", "home", "books"]
          }
        }
      ],
      "inputSchema": {
        "type": "object",
        "properties": {
          "q": { "type": "string", "minLength": 1 },
          "category": { "type": "string", "enum": ["electronics", "clothing", "home", "books"] }
        },
        "required": ["q"]
      },
      "outputs": {
        "type": "application/json",
        "success_codes": [200]
      },
      "outputSchema": {
        "type": "object",
        "properties": {
          "results": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "id": { "type": "string" },
                "name": { "type": "string" },
                "price": { "type": "number" }
              }
            }
          }
        }
      }
    },
    {
      "id": "add_to_cart",
      "type": "state_change",
      "intent": "write",
      "sideEffect": "idempotent",
      "name": "Add to Cart",
      "description": "Add a product to shopping cart",
      "method": "POST",
      "endpoint": "/api/cart/add",
      "selector": "button[data-action='add-to-cart']",
      "authentication_required": true,
      "authScopes": ["cart:write"],
      "idempotencyKeySupported": true,
      "idempotencyKeyHeader": "Idempotency-Key",
      "conformanceLevel": "L2",
      "previewUrl": "/api/cart/preview",
      "dryRunSupported": true,
      "preconditions": ["Product must be in stock", "User must be logged in"],
      "rateLimitHint": {
        "requests": 50,
        "window": "1m"
      },
      "inputs": [
        {
          "name": "product_id",
          "type": "string",
          "required": true,
          "description": "Product ID",
          "examples": ["prod_123", "prod_456"]
        },
        {
          "name": "quantity",
          "type": "integer",
          "required": false,
          "default": 1,
          "description": "Quantity to add",
          "validation": {
            "min": 1,
            "max": 10
          }
        }
      ],
      "inputSchema": {
        "type": "object",
        "properties": {
          "product_id": { "type": "string" },
          "quantity": { "type": "integer", "minimum": 1, "maximum": 10, "default": 1 }
        },
        "required": ["product_id"]
      },
      "outputs": {
        "type": "application/json",
        "success_codes": [200, 201]
      },
      "outputSchema": {
        "type": "object",
        "properties": {
          "cart_id": { "type": "string" },
          "total_items": { "type": "integer" }
        }
      }
    }
  ],
  "security": {
    "csrfRequired": true,
    "csrfTokenHeader": "X-CSRF-Token",
    "requiredHeaders": ["Content-Type"],
    "allowedOrigins": ["https://example.com"],
    "sameSite": "Lax"
  },
  "authentication": {
    "required": false,
    "optional_for": ["search_products"],
    "methods": ["session", "api_key"],
    "endpoints": {
      "login": "/auth/login",
      "logout": "/auth/logout"
    }
  },
  "rate_limits": {
    "requests_per_minute": 100,
    "requests_per_hour": 1000,
    "burst_limit": 20
  }
}
